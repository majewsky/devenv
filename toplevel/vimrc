set t_Co=256
let g:gardener_light_comments=1
colo gardener

filetype plugin off
let mapleader = ","
let g:C_MapLeader = ","

function! SwitchSourceHeader()
	"update!
	if (expand ("%:e") == "cpp")
		find %:t:r.h
	else
		find %:t:r.cpp
	endif
endfunction
nmap <Leader>s :call SwitchSourceHeader()<CR>

"config and keybindings for BufExplorer plugin
let g:bufExplorerSortBy='name'
nmap <Leader><Leader> <Leader>be

"filetype plugin on
set autoindent
set background=dark
set cindent
set hlsearch
set incsearch
set linebreak
set mouse=a
set number
set shiftwidth=4
set smarttab
set tabstop=4
syntax enable

"remove highlighting of search matches
noremap <Leader> :nohl<CR>:<BS>
"after repeating commands, put the cursor at the start of the change
map . .`[

" highlight interesting whitespace (TODO: autocmd BufWinEnter is an ugly hack;
" setting the colorscheme in newly-created windows seems to wipe the highlight
" list)
highlight MyTab ctermbg=red
match MyTab /^\t\+/
highlight MySpace ctermbg=red
2match MySpace /\s\+$/

if hostname() == "ptpcp11"
	autocmd BufWinEnter * highlight MyTab ctermbg=242
	autocmd BufWinEnter * highlight MySpace ctermbg=245
else
	autocmd BufWinEnter * highlight MyTab ctermbg=235
	autocmd BufWinEnter * highlight MySpace ctermbg=238
endif

"formatting style for Python code and changelogs in our working group
autocmd FileType python setlocal expandtab smarttab nocindent tabstop=4 softtabstop=4
autocmd FileType python map <F5> :w<CR>:!python "%"<CR>
autocmd FileType changelog setlocal expandtab smarttab tabstop=4 softtabstop=4

autocmd FileType tex map <F5> :w<CR>:wa<CR>:make<CR>
autocmd FileType tex map <F6> :!xdg-open %<.pdf &>/dev/null &disown<CR><CR>
autocmd FileType tex setlocal nocindent
