#compdef rtree
typeset -A opt_args

(( $+functions[_rtree_zsh_comp] )) || _rtree_zsh_comp()
{
    if (( CURRENT == 2 )); then
        local -a _commands
        _commands=(
            'get:Get the local path for a remote URL (and clone if missing)'
            'index:Rebuild the repository index and offer to restore deleted repos'
            'repos:List repositories in index'
            'remotes:List remote URLs in index'
            'import:Import a repository from outside the rtree into the rtree'
        )
        _describe -t commands 'rtree command' _commands
    elif (( CURRENT == 3 )); then
        case "$words[2]" in
            get)
                _alternative "remotes:remote URLs:($(rtree remotes))"
                ;;
            import)
                _directories
                ;;
        esac
    fi
}

_rtree_zsh_comp "$@"
